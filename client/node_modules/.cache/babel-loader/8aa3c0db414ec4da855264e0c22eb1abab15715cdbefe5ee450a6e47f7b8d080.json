{"ast":null,"code":"var _jsxFileName = \"/Users/odu_1/Cursor projects/Chat app/client/src/components/chat/ChatRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { FaArrowLeft, FaPaperPlane } from 'react-icons/fa';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport './ChatRoom.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatRoom = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [otherUser, setOtherUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingTimeout, setTypingTimeout] = useState(null);\n  const {\n    userId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // Initialize socket connection\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n    const newSocket = io('http://192.168.0.178:5001');\n    setSocket(newSocket);\n    newSocket.on('connect', () => {\n      console.log('Connected to socket server');\n      newSocket.emit('authenticate', token);\n    });\n    newSocket.on('authenticated', data => {\n      console.log('Socket authenticated:', data);\n    });\n    newSocket.on('auth_error', error => {\n      console.error('Socket auth error:', error);\n    });\n    newSocket.on('new_message', message => {\n      setMessages(prev => [...prev, message]);\n    });\n    newSocket.on('user_typing', data => {\n      if (data.userId === parseInt(userId)) {\n        setIsTyping(true);\n      }\n    });\n    newSocket.on('user_stopped_typing', data => {\n      if (data.userId === parseInt(userId)) {\n        setIsTyping(false);\n      }\n    });\n    return () => {\n      newSocket.close();\n    };\n  }, [userId]);\n\n  // Fetch chat history and user info\n  useEffect(() => {\n    const fetchChatData = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`/api/messages/chat/${userId}`);\n        setMessages(response.data.messages || []);\n        setOtherUser(response.data.otherUser);\n      } catch (error) {\n        console.error('Error fetching chat data:', error);\n        navigate('/chats');\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (userId) {\n      fetchChatData();\n    }\n  }, [userId, navigate]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // Mark messages as read when chat is opened\n  useEffect(() => {\n    if (socket && otherUser) {\n      socket.emit('mark_read', {\n        senderId: parseInt(userId)\n      });\n    }\n  }, [socket, userId, otherUser]);\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !socket) return;\n    const messageData = {\n      receiverId: parseInt(userId),\n      content: newMessage.trim(),\n      messageType: 'text'\n    };\n    socket.emit('private_message', messageData);\n    setNewMessage('');\n\n    // Clear typing indicator\n    if (typingTimeout) {\n      clearTimeout(typingTimeout);\n    }\n    socket.emit('typing_stop', {\n      receiverId: parseInt(userId)\n    });\n  };\n  const handleTyping = e => {\n    setNewMessage(e.target.value);\n    if (!socket) return;\n\n    // Emit typing start\n    socket.emit('typing_start', {\n      receiverId: parseInt(userId)\n    });\n\n    // Clear existing timeout\n    if (typingTimeout) {\n      clearTimeout(typingTimeout);\n    }\n\n    // Set new timeout to stop typing indicator\n    const timeout = setTimeout(() => {\n      socket.emit('typing_stop', {\n        receiverId: parseInt(userId)\n      });\n    }, 1000);\n    setTypingTimeout(timeout);\n  };\n  const formatTime = timestamp => {\n    if (!timestamp) return '';\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const getInitials = username => {\n    return username.split(' ').map(name => name.charAt(0)).join('').toUpperCase().slice(0, 2);\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage(e);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-room-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading chat...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this);\n  }\n  if (!otherUser) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-room-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"User not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/chats'),\n          className: \"btn btn-primary\",\n          children: \"Back to Chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-room-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/chats'),\n        className: \"back-button\",\n        children: /*#__PURE__*/_jsxDEV(FaArrowLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-avatar\",\n        children: otherUser.avatar_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: otherUser.avatar_url,\n          alt: otherUser.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this) : getInitials(otherUser.username)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: otherUser.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Online\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-chat\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No messages yet. Start the conversation!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this) : messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.sender_id === user.id ? 'sent' : 'received'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-bubble\",\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-time\",\n          children: formatTime(message.created_at)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }, this)), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [otherUser.username, \" is typing...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSendMessage,\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textareaRef,\n        value: newMessage,\n        onChange: handleTyping,\n        onKeyPress: handleKeyPress,\n        placeholder: \"Type a message...\",\n        rows: \"1\",\n        className: \"message-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-button\",\n        disabled: !newMessage.trim(),\n        children: /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatRoom, \"FQC7jZeY0gBU6/j8JNwt0m1/dL8=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = ChatRoom;\nexport default ChatRoom;\nvar _c;\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","useAuth","FaArrowLeft","FaPaperPlane","io","axios","jsxDEV","_jsxDEV","ChatRoom","_s","messages","setMessages","newMessage","setNewMessage","otherUser","setOtherUser","loading","setLoading","socket","setSocket","isTyping","setIsTyping","typingTimeout","setTypingTimeout","userId","user","navigate","messagesEndRef","textareaRef","token","localStorage","getItem","newSocket","on","console","log","emit","data","error","message","prev","parseInt","close","fetchChatData","response","get","_messagesEndRef$curre","current","scrollIntoView","behavior","senderId","handleSendMessage","e","preventDefault","trim","messageData","receiverId","content","messageType","clearTimeout","handleTyping","target","value","timeout","setTimeout","formatTime","timestamp","date","Date","toLocaleTimeString","hour","minute","getInitials","username","split","map","name","charAt","join","toUpperCase","slice","handleKeyPress","key","shiftKey","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","avatar_url","src","alt","length","sender_id","id","created_at","ref","onSubmit","onChange","onKeyPress","placeholder","rows","type","disabled","_c","$RefreshReg$"],"sources":["/Users/odu_1/Cursor projects/Chat app/client/src/components/chat/ChatRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { FaArrowLeft, FaPaperPlane } from 'react-icons/fa';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport './ChatRoom.css';\n\nconst ChatRoom = () => {\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [otherUser, setOtherUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingTimeout, setTypingTimeout] = useState(null);\n  \n  const { userId } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // Initialize socket connection\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    const newSocket = io('http://192.168.0.178:5001');\n    setSocket(newSocket);\n\n    newSocket.on('connect', () => {\n      console.log('Connected to socket server');\n      newSocket.emit('authenticate', token);\n    });\n\n    newSocket.on('authenticated', (data) => {\n      console.log('Socket authenticated:', data);\n    });\n\n    newSocket.on('auth_error', (error) => {\n      console.error('Socket auth error:', error);\n    });\n\n    newSocket.on('new_message', (message) => {\n      setMessages(prev => [...prev, message]);\n    });\n\n    newSocket.on('user_typing', (data) => {\n      if (data.userId === parseInt(userId)) {\n        setIsTyping(true);\n      }\n    });\n\n    newSocket.on('user_stopped_typing', (data) => {\n      if (data.userId === parseInt(userId)) {\n        setIsTyping(false);\n      }\n    });\n\n    return () => {\n      newSocket.close();\n    };\n  }, [userId]);\n\n  // Fetch chat history and user info\n  useEffect(() => {\n    const fetchChatData = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`/api/messages/chat/${userId}`);\n        setMessages(response.data.messages || []);\n        setOtherUser(response.data.otherUser);\n      } catch (error) {\n        console.error('Error fetching chat data:', error);\n        navigate('/chats');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (userId) {\n      fetchChatData();\n    }\n  }, [userId, navigate]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Mark messages as read when chat is opened\n  useEffect(() => {\n    if (socket && otherUser) {\n      socket.emit('mark_read', { senderId: parseInt(userId) });\n    }\n  }, [socket, userId, otherUser]);\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim() || !socket) return;\n\n    const messageData = {\n      receiverId: parseInt(userId),\n      content: newMessage.trim(),\n      messageType: 'text'\n    };\n\n    socket.emit('private_message', messageData);\n    setNewMessage('');\n    \n    // Clear typing indicator\n    if (typingTimeout) {\n      clearTimeout(typingTimeout);\n    }\n    socket.emit('typing_stop', { receiverId: parseInt(userId) });\n  };\n\n  const handleTyping = (e) => {\n    setNewMessage(e.target.value);\n    \n    if (!socket) return;\n\n    // Emit typing start\n    socket.emit('typing_start', { receiverId: parseInt(userId) });\n\n    // Clear existing timeout\n    if (typingTimeout) {\n      clearTimeout(typingTimeout);\n    }\n\n    // Set new timeout to stop typing indicator\n    const timeout = setTimeout(() => {\n      socket.emit('typing_stop', { receiverId: parseInt(userId) });\n    }, 1000);\n\n    setTypingTimeout(timeout);\n  };\n\n  const formatTime = (timestamp) => {\n    if (!timestamp) return '';\n    \n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const getInitials = (username) => {\n    return username\n      .split(' ')\n      .map(name => name.charAt(0))\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage(e);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"chat-room-container\">\n        <div className=\"loading-container\">\n          <div className=\"spinner\"></div>\n          <p>Loading chat...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!otherUser) {\n    return (\n      <div className=\"chat-room-container\">\n        <div className=\"error-container\">\n          <p>User not found</p>\n          <button onClick={() => navigate('/chats')} className=\"btn btn-primary\">\n            Back to Chats\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"chat-room-container\">\n      <div className=\"chat-header\">\n        <button onClick={() => navigate('/chats')} className=\"back-button\">\n          <FaArrowLeft />\n        </button>\n        <div className=\"user-avatar\">\n          {otherUser.avatar_url ? (\n            <img src={otherUser.avatar_url} alt={otherUser.username} />\n          ) : (\n            getInitials(otherUser.username)\n          )}\n        </div>\n        <div className=\"user-info\">\n          <h3>{otherUser.username}</h3>\n          <p>Online</p>\n        </div>\n      </div>\n\n      <div className=\"chat-messages\">\n        {messages.length === 0 ? (\n          <div className=\"empty-chat\">\n            <p>No messages yet. Start the conversation!</p>\n          </div>\n        ) : (\n          messages.map((message) => (\n            <div\n              key={message.id}\n              className={`message ${message.sender_id === user.id ? 'sent' : 'received'}`}\n            >\n              <div className=\"message-bubble\">\n                {message.content}\n              </div>\n              <div className=\"message-time\">\n                {formatTime(message.created_at)}\n              </div>\n            </div>\n          ))\n        )}\n        \n        {isTyping && (\n          <div className=\"typing-indicator\">\n            {otherUser.username} is typing...\n          </div>\n        )}\n        \n        <div ref={messagesEndRef} />\n      </div>\n\n      <form onSubmit={handleSendMessage} className=\"chat-input\">\n        <textarea\n          ref={textareaRef}\n          value={newMessage}\n          onChange={handleTyping}\n          onKeyPress={handleKeyPress}\n          placeholder=\"Type a message...\"\n          rows=\"1\"\n          className=\"message-input\"\n        />\n        <button\n          type=\"submit\"\n          className=\"send-button\"\n          disabled={!newMessage.trim()}\n        >\n          <FaPaperPlane />\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatRoom; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}